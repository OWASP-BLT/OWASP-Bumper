# Copilot Instructions for OWASP-Bumper

## Project Overview

OWASP-Bumper is a GitHub Action that automatically generates an HTML page listing all repositories in the OWASP GitHub organization. The generated page is deployed to GitHub Pages and provides features like filtering, sorting, and activity sparklines.

## Technology Stack

- **Python 3.11**: Main scripting language (no external dependencies required)
- **GitHub Actions**: CI/CD for automated generation and deployment
- **GitHub Pages**: Hosting for the generated HTML page
- **HTML/CSS/JavaScript**: Frontend for the repository listing page

## Project Structure

```
OWASP-Bumper/
├── generate_repo_list.py    # Main Python script that generates the HTML page
├── index.html               # Generated HTML output (auto-generated, do not edit directly)
├── .github/
│   └── workflows/
│       └── generate-repo-list.yml   # GitHub Actions workflow
├── README.md                # Project documentation
├── SETUP.md                 # Setup instructions
└── .gitignore               # Git ignore patterns
```

## Code Style and Conventions

### Python

- Use Python 3.11+ features
- Use type hints for function parameters and return values
- Follow PEP 8 style guidelines
- Use standard library only (no external dependencies)
- Handle API errors gracefully with appropriate error messages
- Use meaningful variable and function names

### JavaScript (embedded in HTML)

- Use modern ES6+ syntax
- Escape user content to prevent XSS using the `escapeHtml()` function
- Use `const` and `let` instead of `var`
- Use template literals for string interpolation

### HTML/CSS

- Use semantic HTML elements
- Maintain responsive design patterns
- Follow the existing CSS class naming conventions

## Build and Run Commands

### Local Testing

```bash
# Generate the HTML page locally
export GITHUB_TOKEN=your_token_here  # Optional but recommended
export GITHUB_ORG=owasp
python3 generate_repo_list.py

# View the generated page
open index.html  # macOS
# or
xdg-open index.html  # Linux
```

### Environment Variables

- `GITHUB_TOKEN`: GitHub personal access token (optional, avoids rate limits)
- `GITHUB_ORG`: GitHub organization name (default: "owasp")
- `OUTPUT_FILE`: Output HTML file name (default: "index.html")
- `FETCH_SPARKLINES`: Set to "true" to fetch activity data (default: "true")
- `FETCH_METADATA`: Set to "true" to fetch index.md metadata (default: "true")

## Key Features to Maintain

1. **Repository Listing**: Display all repositories with name, description, stars, forks, issues, and PRs
2. **Filtering**: Support for All, Projects, and Chapters filters
3. **Activity Badges**: Show inactive repository indicators (1yr+, 3yr+)
4. **Sorting**: Multiple sort options (updated, name, stars, forks, etc.)
5. **Sparklines**: 52-week commit activity visualization
6. **Bump Button**: Create reminder issues for inactive repositories
7. **Responsive Design**: Works on desktop and mobile

## Important Notes

- The `index.html` file is auto-generated by the GitHub Actions workflow. Do not edit it directly; changes should be made to `generate_repo_list.py`.
- The workflow runs daily at 00:00 UTC and can be triggered manually.
- Rate limiting should be considered when making API calls; use appropriate delays.
- Always test changes locally before committing.

## Testing Changes

1. Run the Python script locally with a valid GitHub token
2. Open the generated `index.html` in a browser
3. Test filtering, sorting, and search functionality
4. Verify responsiveness on different screen sizes
5. Check that all links and buttons work correctly
